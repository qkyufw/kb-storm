# kb-storm (键图) 用户手册

## 目录

1. [概述](#概述)
2. [界面导航](#界面导航)
3. [基本操作](#基本操作)
   - [卡片操作](#卡片操作)
   - [连接操作](#连接操作)
   - [选择操作](#选择操作)
   - [历史操作](#历史操作)
4. [高级功能](#高级功能)
   - [布局选项](#布局选项)
   - [导入导出](#导入导出)
   - [自由连线模式](#自由连线模式)
   - [样式自定义](#样式自定义)
   - [剪贴板操作](#剪贴板操作)
5. [快捷键](#快捷键)
6. [常见问题](#常见问题)
7. [故障排除](#故障排除)

## 概述

kb-storm (键盘风暴) 是一款以键盘操作为核心的思维可视化工具，特别设计用于提高思考和组织创意的效率。它结合了思维导图和白板的优点，让您可以通过键盘快捷键快速创建和管理内容，减少鼠标操作带来的干扰。本手册将指导您使用 kb-storm 的各种功能，从基本操作到高级特性。

## 界面导航

kb-storm 的界面设计简洁直观，主要由以下部分组成：

- **顶部工具栏**：包含常用操作按钮，如创建卡片、撤销/重做、复制/粘贴等
- **无限画布区域**：主要工作区，用于创建和组织卡片
- **右下角缩放控制**：用于调整画布的缩放级别

### 视图操作

- **缩放画布**：使用鼠标滚轮，或按 Ctrl+ +/- 键
- **重置视图**：按 Ctrl+0 重置画布缩放和位置

## 基本操作

### 卡片操作

#### 创建卡片

- **使用快捷键**：按 `Ctrl+D`（默认，可在快捷键设置中自定义）
- **通过工具栏**：点击工具栏上的"新建卡片"按钮
- **双击画布**：在画布空白处双击

#### 编辑卡片

- **选中并按 Enter**：选择卡片后按 Enter 键进入编辑模式
- **双击卡片**：双击卡片直接进入编辑模式（暂时无效）
- **完成编辑**：按 `Ctrl+Enter` 或按 Esc 完成编辑
- **使用Markdown**：卡片内容支持基本Markdown语法，如粗体、斜体、列表等

#### 移动卡片

- **键盘方向键**：选中卡片后使用方向键移动
- **大幅移动**：按住 `Shift` + 方向键进行大幅度移动
- **鼠标拖动**：使用鼠标直接拖动卡片
- **对齐网格**：按住 Alt 键拖动可以对齐到网格

#### 删除卡片

- **Delete 键**：选中卡片后按 Delete / backspace键删除
- **工具栏按钮**：选中卡片后点击工具栏上的"删除"按钮

#### 调整大小和样式

- **自动调整大小**：内容更改时，卡片大小自动适应
- **调整颜色**：在右侧属性面板中选择卡片颜色
- **调整字体**：在右侧属性面板中调整字体大小和样式

### 连接操作

#### 创建连接

1. **使用键盘快捷键**：
   - 选中一个卡片
   - 按 `Ctrl+I` 进入连线模式
   - 使用方向键选择目标卡片
   - 按 Enter 确认连接

2. **快速创建连接卡片**：
   - 选中一个卡片
   - 按 `Ctrl+方向键` 在指定方向创建一个新卡片并自动连接

3. **自由连线模式**：
   - 点击工具栏上的"自由连线"按钮
   - 在起始卡片上按下鼠标左键
   - 拖动到目标卡片
   - 释放鼠标按键完成连接
   - **注意线的起点终点都必须要在卡片上**

#### 编辑连接标签

- 选中连接线后按 Enter 键进入编辑模式
- 输入标签内容后按 Enter 确认
- 在右侧属性面板中可以调整标签样式

#### 删除连接

- 选中连接线后按 Delete 键删除
- 删除卡片时，与之相关的所有连接也会被自动删除

#### 调整连接样式

- 在右侧属性面板中选择连接线样式（实线、虚线等）
- 调整连接线颜色
- 选择连接线箭头样式（单向、双向、无箭头）

### 选择操作

#### 选择卡片

- **方向选择**：按 Tab+方向键选择特定方向的卡片
- **多选**：按住 Ctrl 或 Shift 键同时点击多个卡片（暂时无效）
- **全选**：按 Ctrl+A 选择所有卡片
- **框选**：在空白处按下鼠标左键并拖动创建选区框

#### 选择连接线

- **切换选择模式**：按 Tab+空格 切换到连接线选择模式
- **循环选择**：在连接线选择模式下按 Tab 键循环选择连接线
- **单击选择**：直接点击连接线

### 历史操作

- **撤销**：按 Ctrl+Z 撤销最近的操作
- **重做**：按 Ctrl+Shift+Z 或 Ctrl+Y 重做已撤销的操作
- **历史记录**：系统会自动保存您的操作历史，允许多次撤销和重做

## 高级功能

### 导入导出

#### 导出功能

kb-storm 支持多种导出格式：

1. **Markdown 导出**:
   - 点击工具栏中的"导出为Markdown"按钮
   - 思维导图内容将被转换为Markdown格式
   - 元数据被保存，便于后续导入恢复完整画布
2. **Mermaid 导出**:
   - 点击工具栏中的"导出为Mermaid代码"按钮
   - 适合在支持Mermaid的平台（如GitHub、GitLab）中使用
3. **PNG 图片导出**:
   - 点击工具栏中的"导出为PNG图像"按钮
   - 将当前视图保存为高质量图片

#### 导入功能

1. **Markdown 导入**:
   - 点击工具栏中的"导入Markdown"按钮
   - 粘贴Markdown内容或上传文件
   - 支持导入之前导出的带元数据Markdown文件，完整还原思维导图

2. **Mermaid 导入**:
   - 点击工具栏中的"导入Mermaid"按钮
   - 粘贴Mermaid代码或上传文件
   - 自动解析并创建相应的卡片和连接

### markdown 导入格式

当使用 markdown 格式进行导入的时候，可以使用带有元数据导出的 markdown 文件，可以完整还原思维导图。也可以直接上传 markdown 文件，但需要注意：

1. 标题可有可无
2. 各个卡片之间，请以“---”进行分割，上传之后，将会自动创建相关的卡片
3. 尽量不要上传复杂的 markdown 文件

### 自由连线模式

自由连线模式允许您直接用鼠标绘制连接线：

1. 点击工具栏中的"自由连线"按钮
2. 在起点卡片上按下鼠标左键
3. 拖动到终点卡片
4. 释放鼠标左键完成连接

注意：起点和终点必须都位于卡片上，且不能是同一张卡片。

### 样式自定义

#### 卡片样式

- **颜色主题**：从预设的颜色主题中选择
- **自定义颜色**：为卡片选择自定义背景色和文字颜色
- **边框样式**：调整卡片边框粗细和样式
- **阴影效果**：开启或关闭卡片阴影，调整阴影深度

#### 连接线样式

- **线条样式**：选择实线、虚线、点线等
- **线条颜色**：自定义连接线颜色
- **箭头样式**：选择不同的箭头样式和大小
- **曲线类型**：直线、曲线、折线等连接方式

### 剪贴板操作

#### 复制和粘贴

- **复制卡片**：选中卡片后按 Ctrl+C
- **剪切卡片**：选中卡片后按 Ctrl+X
- **粘贴卡片**：按 Ctrl+V 粘贴之前复制的卡片
- **复制格式**：选中卡片后按 Ctrl+Shift+C 仅复制样式
- **应用格式**：选中目标卡片后按 Ctrl+Shift+V 应用复制的样式

#### 批量操作

- **批量复制**：选择多个卡片后复制
- **批量粘贴**：保持相对位置关系粘贴多个卡片
- **复制连接关系**：连同卡片间的连接一起复制

## 快捷键

kb-storm 提供了丰富的键盘快捷键，是提高生产力的关键：

您可以通过按 Ctrl+K 打开快捷键设置面板，查看设置快捷键以适应您的工作习惯。

## 常见问题

### 如何保存我的思维导图？

kb-storm 提供多种保存方式：
1. 导出为 Markdown 格式，包含完整元数据（推荐）
2. 导出为 Mermaid 流程图代码
3. 导出为 PNG 图像
4. 自动保存到本地存储

### 如何恢复之前的思维导图？

通过"导入 Markdown"功能，选择之前导出的包含元数据的Markdown文件，可以完整恢复所有卡片、连接以及它们的位置和样式。

### 如何在不同设备间共享思维导图？

导出为 Markdown 格式，然后在另一台设备上导入该文件。这样可以确保所有布局和样式都得到保留。
